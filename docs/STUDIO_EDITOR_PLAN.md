# Friday AI: Studio â€” Content Editor Plan

## How Descript Works (Key Takeaways)

Descript's core insight: **the transcript IS the edit interface**. Every word has a `[text, start_time, end_time]` timestamp. Edit text â†’ edit media. The data model is:

1. **Source media** (immutable audio/video files)
2. **Word-level alignment** â€” per-word timestamps linking text to audio
3. **Composition** â€” non-destructive edit list (which segments to include, their order)
4. **Scenes** â€” subdivisions, each with visual layers (video, images, overlays)
5. **Script** â€” the human-readable text that drives everything

## Friday AI Studio: Adapted Approach

The key difference: **Friday generates the content, the editor lets you refine it.** We don't need speech recognition â€” we have the script because Friday wrote it. The workflow:

1. User: *"Create a 60-second product demo for my app"*
2. Friday generates a **project** â€” a script with scenes, then audio/video per scene
3. User opens the **Editor** to review script + audio + video synced together
4. User edits text, clicks "Regenerate audio" on a scene, swaps video clips
5. Export the final result

## Data Model: Project File

```
~/FridayWorkspace/generated/projects/proj_1234.json
{
  "title": "Product Demo",
  "scenes": [
    {
      "id": "scene_1",
      "heading": "Intro",
      "script": "Welcome to our product demo. Today we'll show you...",
      "audio": "/path/to/tts_scene1.mp3",       // generated by Friday
      "video": "/path/to/vid_scene1.mp4",        // generated by Friday
      "image": "/path/to/img_scene1.png",        // or a still frame
      "duration": 8.5                            // seconds
    },
    { "id": "scene_2", ... }
  ]
}
```

## UI Layout

### Normal mode (current â€” no change):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”‚                              â”‚  Preview   â”‚
â”‚  Side  â”‚        Chat / Home           â”‚  Agents    â”‚
â”‚  bar   â”‚                              â”‚  Content â† â”‚ NEW tab
â”‚        â”‚                              â”‚            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Editor mode (when a project is opened):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        â”‚          â”‚                 EDITOR                     â”‚
â”‚        â”‚          â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚        â”‚          â”‚ â”‚        â”‚                â”‚               â”‚â”‚
â”‚  Side  â”‚   Chat   â”‚ â”‚ Scenes â”‚    Script      â”‚    Canvas     â”‚â”‚
â”‚  bar   â”‚   (30%)  â”‚ â”‚ (rail) â”‚   (editable)   â”‚  (video/img)  â”‚â”‚
â”‚        â”‚          â”‚ â”‚        â”‚                â”‚               â”‚â”‚
â”‚        â”‚          â”‚ â”‚  [1]   â”‚  # Intro       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚â”‚
â”‚        â”‚          â”‚ â”‚  [2]   â”‚  Welcome to... â”‚  â”‚  â–¶ 0:08  â”‚ â”‚â”‚
â”‚        â”‚          â”‚ â”‚  [3]   â”‚  # Features    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚â”‚
â”‚        â”‚          â”‚ â”‚  [4]   â”‚  Our product   â”‚               â”‚â”‚
â”‚        â”‚          â”‚ â”‚        â”‚  can do...     â”‚               â”‚â”‚
â”‚        â”‚          â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚
â”‚        â”‚          â”‚ â”‚ â—€â—€  â–¶  â–¶â–¶   0:00 / 1:32               â”‚â”‚
â”‚        â”‚          â”‚ â”‚ â–“â–“â–“â–“â–“â–“â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â”‚â”‚
â”‚        â”‚          â”‚ â”‚ [scene1  ][  scene2  ][   scene3   ]    â”‚â”‚
â”‚        â”‚          â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Content tab (right panel, alongside Preview and Agents):

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Preview Agents Contentâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Projects          â”‚
â”‚                      â”‚
â”‚  ğŸ“„ Product Demo      â”‚  â† click to open in editor
â”‚     3 scenes Â· 1:32  â”‚
â”‚                      â”‚
â”‚  ğŸ“„ Blog Post Draft   â”‚
â”‚     5 sections       â”‚
â”‚                      â”‚
â”‚  ğŸ“„ Social Clips      â”‚
â”‚     8 scenes Â· 0:45  â”‚
â”‚                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ğŸ“ Scripts           â”‚
â”‚                      â”‚
â”‚  script_171234.md    â”‚
â”‚  script_171230.md    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Editor Components Breakdown

### 1. Scene Rail (left strip, ~80px)
- Numbered thumbnail images for each scene
- Click to jump to that scene in script + canvas
- Active scene highlighted
- Drag to reorder (stretch goal)

### 2. Script Editor (center-left, ~45%)
- Editable text area with scene headings (`# Intro`, `# Features`)
- Each scene's text is a section
- Toolbar: **Regenerate Audio** | **Regenerate Video** | **Add Scene**
- Edit text â†’ click regenerate â†’ Friday re-creates just that scene's audio

### 3. Canvas (center-right, ~55%)
- Shows current scene's video/image
- Video player with controls when video is present
- Falls back to image display, or blank for script-only projects

### 4. Timeline Bar (bottom, ~80px)
- Playback controls: prev scene / play-pause / next scene
- Progress bar showing total duration
- Scene segments as colored blocks
- Click a segment to jump to that scene

## Implementation Plan (files to create/modify)

| # | File | What |
|---|------|------|
| 1 | `store/useStore.js` | Add `editorOpen`, `editorProject`, `contentFiles` state |
| 2 | `components/preview/PreviewPanel.jsx` | Add "Content" tab |
| 3 | `components/content/ContentList.jsx` | File list for Content tab |
| 4 | `components/editor/EditorPanel.jsx` | Main editor container |
| 5 | `components/editor/SceneRail.jsx` | Left thumbnail strip |
| 6 | `components/editor/ScriptEditor.jsx` | Center text editor |
| 7 | `components/editor/Canvas.jsx` | Right video/image viewer |
| 8 | `components/editor/TimelineBar.jsx` | Bottom playback + progress |
| 9 | `App.jsx` | Conditional layout: chat 30% + editor 70% |
| 10 | `electron/main.cjs` | IPC: `scan-content-files`, `read-project`, `save-project` |
| 11 | `electron/preload.cjs` | Bridge methods |

## Runtime Architecture: Artifact System

### The Problem

The original plan had the desktop client assembling the project JSON â€” linking script text to audio/video files. But this is client-specific logic that should live in the **runtime**, so that:

1. **CLI gets the same capability** â€” `friday chat` can produce structured projects too
2. **Any future client** (web, mobile, API) gets it for free
3. **The agent orchestrates** â€” the runtime decides how to structure outputs, not the UI

### The Solution: Artifacts

An **Artifact** is a structured output produced by the agent during a conversation. It's a general-purpose concept that works for media projects, code changes, reports, workflows â€” anything the agent produces that has structure beyond plain text.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  friday-runtime                  â”‚
â”‚                                                  â”‚
â”‚  Agent (Claude)                                  â”‚
â”‚    â”‚                                             â”‚
â”‚    â”œâ”€â”€ calls save_artifact MCP tool â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚    â”‚                                         â”‚   â”‚
â”‚    â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚    â”‚   â”‚  ArtifactStore                  â”‚   â”‚   â”‚
â”‚    â”‚   â”‚  ~/.friday/artifacts/           â”‚   â”‚   â”‚
â”‚    â”‚   â”‚                                 â”‚   â”‚   â”‚
â”‚    â”‚   â”‚  art_1234.json                  â”‚   â”‚   â”‚
â”‚    â”‚   â”‚  { type: "media_project",       â”‚   â”‚   â”‚
â”‚    â”‚   â”‚    title: "Product Demo",       â”‚   â”‚   â”‚
â”‚    â”‚   â”‚    scenes: [...] }              â”‚   â”‚   â”‚
â”‚    â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚    â”‚                                         â”‚   â”‚
â”‚    â””â”€â”€ emits event: artifact_saved â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚              â”‚                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
     â”‚                    â”‚
  Desktop              CLI
  (opens editor)     (prints summary)
```

### How It Works

1. **Agent generates content** â€” images, audio, video via existing MCP tools
2. **Agent calls `save_artifact`** â€” a new MCP tool that registers the structured output:
   ```json
   {
     "type": "media_project",
     "title": "Product Demo",
     "scenes": [
       {
         "id": "scene_1",
         "heading": "Intro",
         "script": "Welcome to our product demo...",
         "audio": "~/FridayWorkspace/generated/audio/tts_171234.mp3",
         "video": "~/FridayWorkspace/generated/videos/vid_171234.mp4",
         "duration": 8.5
       }
     ]
   }
   ```
3. **Runtime emits `artifact_saved` event** â€” clients receive it
4. **Desktop opens the editor** â€” reads the artifact, renders scenes
5. **CLI prints a summary** â€” "Created project: Product Demo (3 scenes, 1:32)"

### Artifact Types

The system is generic â€” `type` determines how clients render it:

| Type | What | Desktop | CLI |
|------|------|---------|-----|
| `media_project` | Scenes with script + audio + video | Opens editor | Prints scene list |
| `code_change` | Files modified with diffs | Shows diff viewer | Prints diff |
| `report` | Structured document with sections | Opens reader | Prints markdown |
| `workflow` | Multi-step automation plan | Shows step tracker | Prints checklist |

### Runtime Implementation

Two new files in the runtime package:

#### 1. `mcp-servers/artifact-server.js`

Exposes the `save_artifact` MCP tool:
- Validates artifact schema
- Writes to `~/.friday/artifacts/art_{timestamp}.json`
- Emits `artifact_saved` event with the artifact data

#### 2. `src/artifacts/ArtifactStore.js`

Manages artifact persistence:
- `save(artifact)` â€” validate + write + emit event
- `list(type?)` â€” list artifacts, optionally filtered by type
- `get(id)` â€” read a specific artifact
- `update(id, changes)` â€” update (e.g., user edits a scene's script)
- `delete(id)` â€” remove an artifact

### Why This Is Better

- **No client-side assembly** â€” the agent decides the structure, not the UI
- **Works everywhere** â€” CLI, desktop, future web client all get artifacts
- **Extensible** â€” new artifact types require zero runtime changes, just client rendering
- **Agent-driven** â€” the agent can update artifacts mid-conversation ("add another scene")
- **Persistent** â€” artifacts survive across sessions, can be reopened later

## Phased Approach

### Phase 1 (MVP for hackathon)
- Content tab listing projects + scripts
- Editor opens with script text + canvas (video/image)
- Scene rail with thumbnails
- Basic playback controls
- Chat shrinks to 30% when editor is open

### Phase 2 (post-hackathon)
- Artifact System in runtime (`save_artifact` MCP tool + `ArtifactStore`)
- Edit script â†’ regenerate audio per scene via Friday
- Timeline with scene segments
- Word-level sync (highlight words as audio plays)
- Export to video/transcript/subtitles
- Drag-to-reorder scenes

### Phase 3 (future)
- Additional artifact types (code_change, report, workflow)
- CLI rendering for all artifact types
- Artifact versioning and history
- Collaborative editing via artifact updates
